Bootstrap: library
From: ubuntu:20.04

%setup
    # touch /file1
    # touch ${SINGULARITY_ROOTFS}/file2

%files
    # /file1
    # /file1 /opt

%environment
    # export LISTEN_PORT=12345
    # export LC_ALL=C

%post
    apt-get update 

    apt-get install -y build-essential \
    wget \
    git \
    unzip \
    python3-setuptools \
    curl 

    ##########################
    # pip
    ##########################
    curl "https://bootstrap.pypa.io/get-pip.py" -o "install-pip3-ubuntu.py"
    python3 install-pip3-ubuntu.py

    git clone https://github.com/kamata1729/FullySpikingVAE.git
    pip install -r FullySpikingVAE/requirements.txt
    python init_fid_stats.py

%runscript
    echo "Container was created $NOW"
    echo "Arguments received: $*"
    exec echo "$@"

%startscript
    # nc -lp $LISTEN_PORT

%test
    # grep -q NAME=\"Ubuntu\" /etc/os-release
    # if [ $? -eq 0 ]; then
    #     echo "Container base is Ubuntu as expected."
    # else
    #     echo "Container base is not Ubuntu."
    # fi

%labels
    Author d@sylabs.io
    Version v0.0.1

%help
    This is a demo container used to illustrate a def file that uses all
    supported sections.